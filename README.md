# üêæ PersonAccount Aggregator (Reactive WebFlux)

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ Pet –∏ Store.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±–∞–∑–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ **Spring Stack**, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

### –í–µ—Ä—Å–∏–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| **Java** | 17 / 21 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π (Records) –∏ Sealed-–∫–ª–∞—Å—Å–æ–≤ |
| **Spring Boot** | 3.4.1 | –ë–∞–∑–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| **Spring WebFlux** | 6.2.1 | –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-–¥–≤–∏–∂–æ–∫ –Ω–∞ –±–∞–∑–µ Netty |
| **Project Reactor** | 2024.0.x | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ |
| **Resilience4J** | 2.2.x | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–∞–∑–∞–º–∏ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å |
| **OpenAPI (OAS)** | 3.0.x | –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ |

---

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ö–µ–º–∞
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É **API Gateway / Aggregator**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.



**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
1. **Event Loop Thread Model:** –í–º–µ—Å—Ç–æ –º–æ–¥–µ–ª–∏ "–æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –Ω–∞ –∑–∞–ø—Ä–æ—Å", –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ –ø–∞–º—è—Ç–∏.
2. **Standardized Error Handling:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ProblemDetail` —Å–æ–≥–ª–∞—Å–Ω–æ RFC 7807 –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤.
3. **Observability First:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å —É—á–µ—Ç–æ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Health, Metrics, Tracing) —á–µ—Ä–µ–∑ Spring Actuator.

---


## 1. –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ —Å—Ç–µ–∫–µ **Spring Boot 3.4+** –∏ **Project Reactor**.
* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–º —Ä–µ–∂–∏–º–µ.
* **–°—Ü–µ–Ω–∞—Ä–∏–∏:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (Retry), –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (Fallback) –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (Problem Detail).
* **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–æ—á–µ—Ç–∞–Ω–∏–µ Unit-—Ç–µ—Å—Ç–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `WireMock`.

---

## 2. –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π WebClient (Deep Dive)
–î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `WebClient`, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:

* **Non-blocking I/O:** –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç RestTemplate, WebClient –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ—Ç–æ–∫–æ–≤.
* **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–≤:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.onStatus()` –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫. –ë–∏–∑–Ω–µ—Å-–æ—à–∏–±–∫–∏ (404) —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ –¥–æ–º–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ (5xx) –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –º–µ—Ö–∞–Ω–∏–∑–º–∞–º Resilience.
* **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Mono.zip()` –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —á—Ç–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –¥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–∞–º–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.



---

---

## 3. –†–µ–∞–∫—Ç–∏–≤–Ω—ã–π Rest Controller (Deep Dive)

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ **Spring WebFlux**, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã CPU.

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
* **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –ú–µ—Ç–æ–¥—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–±—ä–µ–∫—Ç `Mono<ResponseEntity<AggregatedInfo>>`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ—Ç–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞ (Event Loop) –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –±—ã–ª –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
* **Method Validation 2.0:** –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ—Ç–æ–¥–æ–≤. –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤—Ä–æ–¥–µ `@Min(1)` –∏–ª–∏ `@NotBlank` –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã Spring. –ü—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `HandlerMethodValidationException` (Spring 6.2+).
* **Problem Detail (RFC 7807):** –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ Spring 3+, –æ—à–∏–±–∫–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç–∞—Ç—É—Å-–∫–æ–¥, –∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON-–æ—Ç–≤–µ—Ç.
  * *Title:* –¢–∏–ø –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Validation Failed").
  * *Instance:* –ü—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞, –≤—ã–∑–≤–∞–≤—à–∏–π –æ—à–∏–±–∫—É.
  * *Detail:* –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "petId: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 1").



---

## 4. OpenAPI: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –∏ API First

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø–æ–¥—Ö–æ–¥—É **API First**, –≥–¥–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —è–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
* **Plugin:** `openapi-generator-maven-plugin`.
* **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** –§–∞–π–ª—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.
* **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** –ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ (`mvn compile`) –ø–ª–∞–≥–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
  * **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤:** –°–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ (`@GetMapping`, `@PathVariable`). –≠—Ç–æ –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç —Ä—É—á–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è boilerplate-–∫–æ–¥–∞.
  * **DTO (Data Transfer Objects):** –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Jackson-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
  * **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ü—Ä–∞–≤–∏–ª–∞ –∏–∑ YAML (–Ω–∞–ø—Ä–∏–º–µ—Ä, `minimum: 1`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç—Å—è –≤ Java-–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (`@Min(1)`).



### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:
1.  **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –æ–¥–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É.
2.  **–°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å YAML-—Ñ–∞–π–ª, –∏ –≤–µ—Å—å —Å–≤—è–∑–∞–Ω–Ω—ã–π –∫–æ–¥ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
3.  **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** Swagger UI (–¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `/swagger-ui.html`) –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–µ–Ω, —Ç–∞–∫ –∫–∞–∫ —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–π –∂–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

---

## 5. Resilience4J: –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Resilience4J:

* **Retry (–ü–æ–≤—Ç–æ—Ä—ã):** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `Exponential Backoff` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∞–≤–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è –ø—Ä–∏ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö –≤–Ω–µ—à–Ω–∏—Ö API.
* **Circuit Breaker (–ü—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å):** (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –µ—Å–ª–∏ –æ–Ω —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ—Ç–¥–∞–µ—Ç –æ—à–∏–±–∫–∏, –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞.
* **Time Limiter:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∂–µ—Å—Ç–∫–∏—Ö –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ–±—ã –æ–¥–∏–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–º–µ–¥–ª—è–ª –≤—Å—é —Å–∏—Å—Ç–µ–º—É.

---

## 6. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –≤ Production-—Å—Ä–µ–¥–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å **Spring Boot Actuator** –∏ **Micrometer**.

* **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus:** –≠–∫—Å–ø–æ–∑–∏—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `/actuator/prometheus`.
* **–î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ WebClient:** * `http.client.requests`: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã.
  * –¢–∞–π–º–∏–Ω–≥–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.
* **–†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤ (Event Loop) –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏.
* **Health Checks:** –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Liveness –∏ Readiness –ø—Ä–æ–±—ã).


## üß™ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Testing Strategy)

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø–∏—Ä–∞–º–∏–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Ç–∞–∫ –∏ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ.

### 1. Unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (`@WebFluxTest`)
–§–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ REST-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –º–∞–ø–ø–∏–Ω–≥–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ —Ç—è–∂–µ–ª–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
* **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π:** `WebTestClient`, `Mockito`.
* **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** * –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (`@PathVariable`, `@Min`).
  * –†–∞–±–æ—Ç–∞ `GlobalExceptionHandler` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `ProblemDetail`.
  * –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å HTTP-—Å—Ç–∞—Ç—É—Å–æ–≤ (400, 404, 500) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.



### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (`StepVerifier`)
–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –≤ –∏–∑–æ–ª—è—Ü–∏–∏ –æ—Ç HTTP-—É—Ä–æ–≤–Ω—è. –ü–æ—Å–∫–æ–ª—å–∫—É –º–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `Mono` –∏–ª–∏ `Flux`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤.
* **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π:** `Project Reactor Test`.
* **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
  * –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏–∑ –¥–≤—É—Ö —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.
  * –û—Ç—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ `onErrorResume` (Fallback) –∏ `retryWhen`.
  * –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ (onNext, onError, onComplete).


### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞
```java
// –ü—Ä–∏–º–µ—Ä: –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
StepVerifier.create(service.getAggregatedData(1L, 1L))
    .expectNextMatches(data -> data.getPetName().equals("Doggo"))
    .verifyComplete();
```
---

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å WireMock (`@SpringBootTest`)
–≠—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Ä–µ–∞–ª—å–Ω–æ–µ —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ. –í–º–µ—Å—Ç–æ –∏–º–∏—Ç–∞—Ü–∏–∏ Java-–æ–±—ä–µ–∫—Ç–æ–≤ –º—ã –ø–æ–¥–º–µ–Ω—è–µ–º –≤–Ω–µ—à–Ω–∏–µ API —Ñ–∏–∫—Ç–∏–≤–Ω—ã–º–∏ HTTP-—Å–µ—Ä–≤–µ—Ä–∞–º–∏.

* **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π:** `WireMockExtension`, `DynamicPropertyRegistry`.
* **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@DynamicPropertySource` –¥–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤ WireMock –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `WebClient` –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ—Ä—Ç–æ–≤.
* **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Å—è —Ü–µ–ø–æ—á–∫–∞: –æ—Ç –≤—Ö–æ–¥—è—â–µ–≥–æ HTTP-–∑–∞–ø—Ä–æ—Å–∞ –≤ –Ω–∞—à –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ (Resilience Testing)
–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≤ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.

* **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Retry:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ WireMock (`Scenarios`) –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ø–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å ‚Äî 500 Internal Server Error, –≤—Ç–æ—Ä–æ–π ‚Äî 200 OK"). –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –ø–æ–ø—ã—Ç–∫—É –∏ –≤ –∏—Ç–æ–≥–µ –æ—Ç–¥–∞–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç.
* **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Timeout:** –ò–º–∏—Ç–∞—Ü–∏—è –¥–æ–ª–≥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–∑–∞–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ `withFixedDelay`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –∑–∞–ø–∞—Å–Ω–æ–º—É —Å—Ü–µ–Ω–∞—Ä–∏—é (Fallback).
* **–ü—Ä–æ–≤–µ—Ä–∫–∞ Fallback:** –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, –∞ –æ—Ç–¥–∞–µ—Ç "–∑–∞–≥–ª—É—à–∫—É" (Graceful Degradation), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —á–∞—Å—Ç–∏—á–Ω—É—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

---